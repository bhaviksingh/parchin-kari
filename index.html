<html>

<head>
  <link rel="stylesheet" href="style.css" />
  <script type="text/javascript" src="lib/paper-core.min.js"></script>
  <script>
    var MINIMAL_MODE = true;
    Math.radians = function (degrees) {
      return degrees * Math.PI / 180;
    }


    // Convert from radians to degrees.
    Math.degrees = function (radians) {
      return radians * 180 / Math.PI;
    }

  </script>
  <script src="algo.js"></script>
  <script src="paper/paperFlower.js"></script>
  <script src="paper/paperPlant.js"></script>
  <script src="paper/paperGarden.js"></script>
  <script>
          

    window.onload = () => {

      let canvas = document.getElementById("paper-canvas");
      paper.setup(canvas);

      //setInterval(() => ppplant.drawPlant(), 100);

      const gardenGrow = garden(800, 800, 20, 20, {SPACE_BETWEEN_BRANCHES: 120, FLOWER_SIZE: 40});
      const paperGarden = new PaperGarden(gardenGrow);
      if (MINIMAL_MODE) {
        window.addEventListener("keypress", () => paperGarden.drawGarden())
      } else {
        setInterval(() => paperGarden.drawGarden(), 100);
      }
      

      

      // const plantGrow = plant(600, 600, 10, 20, 50);
      // let ppplant = new PaperPlant(plantGrow);
      // paper.view.draw() ;
      
      let svgbutton = document.getElementById("getsvg");
      svgbutton.addEventListener("click", () => {
        var fileName = "custom.svg"
        var url = "data:image/svg+xml;utf8," + encodeURIComponent(paper.project.exportSVG({asString:true}));
        var link = document.createElement("a");
        link.download = fileName;
        link.href = url;
        link.click();
      })

            

      

  
      let canvas2 = document.getElementById("flower-canvas");
      paper.setup(canvas2);

      new PaperPetal({ x: 400, y:200, size: 150, angle: -Math.PI/4});
      new PaperPetal({ x: 300, y:200, size: 150, angle: -Math.PI/4, flatSide: true, curveIncrementPetal: -0.1, curveAtPetal: 0.8});
      new PaperPetal({ x: 200, y:200, size: 32, width: 8, angle: -Math.PI/2});
      new PaperPetal({ x: 100, y:200, size: 150, angle: -Math.PI/2 - Math.PI/4, flatSide: true, curveIncrementPetal: 0.1, curveAtPetal: 0.8, width: 10});


      new PaperFlower({ x: 100, y:400, size: 80, angle: -Math.PI/2, color: "pink"});
      new PaperFlower({ x: 100, y:420, size: 80, angle: Math.PI/2, color: "pink"});
      new PaperFlower({ x: 300, y:400, size: 90, angle: -Math.PI/2, petalArcAngle: 0.75 * Math.PI, numPetals: 5,  color: "yellow", showPistil: false, pistilSize: 0.1, width: 11});

      new PaperFlower({ x: 500, y:400, size: 90, angle: -Math.PI/2, petalArcAngle: 0.75 * Math.PI, numPetals: 4,  color: "yellow", showPistil: false, pistilSize: 0.1, width: 11});
      new PaperPetal({ x: 500, y: 380,  size: 90, angle: -Math.PI/2, width: 13, subdivs: 10});
     
    }
  </script>
</head>

<body>
  <div id="app">
    <div id="getsvg"> get svg </div>
    <canvas id="paper-canvas" width="800" height="800" style="background:white"></canvas>
    <canvas id="flower-canvas" width="800" height="800" style="background:white"></canvas>
  </div>

</body>

</html>